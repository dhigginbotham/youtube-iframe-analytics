<html>
  <head>
    <title>YouTube IFRAME Analytics</title>
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>
    
    <h1>Youtube IFRAME Analytics Example</h1>
    
    <div id="output"></div>

    <div data-yt-analytics="M7lc1UVf-VE" data-yt-width="300" data-yt-height="200"></div>
    <div data-yt-analytics="eWxGdmLU4Nk" data-yt-width="300" data-yt-height="200" data-yt-vars='{"fs": 1, "autoplay": 1}'></div>
    <div data-yt-analytics="eWxGdmLU4Nkzxcs" data-yt-width="300" data-yt-height="200"></div>

    <script src="js/videoAnalytics.min.js" data-yt-analytics-debug="true"></script>
    <script>
      function createDomElement(state) {
        var el = document.getElementById('output');
        var json = JSON.stringify(state,null,2);
        var pre = document.createElement('pre');
        var text = document.createTextNode(json);
        pre.appendChild(text);
        el.insertBefore(pre, el.childNodes[0]);
      }

      function init() {
        videoAnalytics.on('ready', '*', function(e, state) {
          console.log(state, e);
          createDomElement(state);
        }).on('stateChange', '*', function(e, state) {
          console.log(state, e);
          createDomElement(state);
        }).on('error', '*', function(e, state) {
          console.log(state, e);
          createDomElement(state);
        });
      }

      document.addEventListener('DOMContentLoaded', init, false);
    </script>
  </body>
</html>